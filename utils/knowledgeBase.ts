export interface KnowledgeTerm {
  id: string;
  term: string;
  shortDesc: string;
  longDesc: string;
  category: 'loan' | 'investment' | 'tax' | 'risk' | 'basic';
  relatedTerms: string[];
  unlockCondition: 'always' | 'first_calculation' | 'comparison_complete' | 'stress_test' | 'goal_set';
  icon?: string;
}

export const knowledgeBase: Record<string, KnowledgeTerm> = {
  lpr: {
    id: 'lpr',
    term: 'LPR',
    shortDesc: 'è´·æ¬¾å¸‚åœºæŠ¥ä»·åˆ©çŽ‡ï¼Œæ˜¯é“¶è¡Œå¯¹æœ€ä¼˜è´¨å®¢æˆ·çš„è´·æ¬¾åˆ©çŽ‡ï¼Œä½œä¸ºè´·æ¬¾å®šä»·çš„åŸºå‡†ã€‚',
    longDesc: `LPRï¼ˆLoan Prime Rateï¼‰æ˜¯è´·æ¬¾å¸‚åœºæŠ¥ä»·åˆ©çŽ‡ï¼Œç”±18å®¶æŠ¥ä»·è¡Œæ ¹æ®å…¶å¯¹æœ€ä¼˜è´¨å®¢æˆ·çš„è´·æ¬¾åˆ©çŽ‡æŠ¥ä»·ï¼Œå‰”é™¤æœ€é«˜å’Œæœ€ä½ŽæŠ¥ä»·åŽç®—æœ¯å¹³å‡å¾—å‡ºã€‚

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
- è‡ª2019å¹´èµ·ï¼Œæ–°å‘æ”¾è´·æ¬¾ä¸»è¦å‚è€ƒLPRå®šä»·
- LPRæ¯æœˆ20æ—¥æ›´æ–°ä¸€æ¬¡ï¼Œä¼šå½±å“æµ®åŠ¨åˆ©çŽ‡è´·æ¬¾çš„æœˆä¾›
- åˆ†ä¸º1å¹´æœŸå’Œ5å¹´æœŸä»¥ä¸Šä¸¤ä¸ªå“ç§

**å®žé™…å½±å“ï¼š**
å‡è®¾æ‚¨çš„æˆ¿è´·åˆ©çŽ‡æ˜¯"LPR + 0.5%"ï¼Œå½“å‰5å¹´æœŸLPRä¸º4.2%ï¼Œé‚£ä¹ˆæ‚¨çš„å®žé™…åˆ©çŽ‡å°±æ˜¯4.7%ã€‚å¦‚æžœä¸‹æœˆLPRé™è‡³4.1%ï¼Œæ‚¨çš„åˆ©çŽ‡ä¹Ÿä¼šé™è‡³4.6%ã€‚`,
    category: 'loan',
    relatedTerms: ['fixed_rate', 'floating_rate', 'interest_rate'],
    unlockCondition: 'always'
  },
  
  equal_principal_interest: {
    id: 'equal_principal_interest',
    term: 'ç­‰é¢æœ¬æ¯',
    shortDesc: 'æ¯æœˆè¿˜æ¬¾é‡‘é¢å›ºå®šï¼Œå‰æœŸåˆ©æ¯å¤šã€æœ¬é‡‘å°‘ï¼ŒåŽæœŸæœ¬é‡‘å¤šã€åˆ©æ¯å°‘ã€‚',
    longDesc: `ç­‰é¢æœ¬æ¯æ˜¯æœ€å¸¸è§çš„è¿˜æ¬¾æ–¹å¼ï¼Œç‰¹ç‚¹æ˜¯æ¯æœˆè¿˜æ¬¾é‡‘é¢ç›¸åŒï¼Œä¾¿äºŽè§„åˆ’å®¶åº­è´¢åŠ¡ã€‚

**è®¡ç®—åŽŸç†ï¼š**
æ¯æœˆè¿˜æ¬¾ = è´·æ¬¾æœ¬é‡‘ Ã— [æœˆåˆ©çŽ‡ Ã— (1+æœˆåˆ©çŽ‡)^è¿˜æ¬¾æœˆæ•°] / [(1+æœˆåˆ©çŽ‡)^è¿˜æ¬¾æœˆæ•° - 1]

**ä¼˜ç¼ºç‚¹ï¼š**
âœ… æ¯æœˆè¿˜æ¬¾å›ºå®šï¼Œä¾¿äºŽé¢„ç®—
âœ… å‰æœŸè¿˜æ¬¾åŽ‹åŠ›è¾ƒå°
âŒ æ€»åˆ©æ¯æ”¯å‡ºè¾ƒå¤š
âŒ å‰æœŸè¿˜æ¬¾å¤§éƒ¨åˆ†æ˜¯åˆ©æ¯

**é€‚åˆäººç¾¤ï¼š**
- æ”¶å…¥ç¨³å®šçš„å·¥è–ªæ—
- å¸Œæœ›æ¯æœˆè¿˜æ¬¾åŽ‹åŠ›å‡è¡¡çš„è´­æˆ¿è€…
- ä¸æ‰“ç®—æå‰è¿˜æ¬¾çš„äººç¾¤`,
    category: 'loan',
    relatedTerms: ['equal_principal', 'prepayment', 'interest'],
    unlockCondition: 'first_calculation'
  },

  equal_principal: {
    id: 'equal_principal',
    term: 'ç­‰é¢æœ¬é‡‘',
    shortDesc: 'æ¯æœˆå¿è¿˜å›ºå®šæœ¬é‡‘ï¼Œåˆ©æ¯é€’å‡ï¼Œå‰æœŸè¿˜æ¬¾åŽ‹åŠ›å¤§ä½†æ€»åˆ©æ¯å°‘ã€‚',
    longDesc: `ç­‰é¢æœ¬é‡‘è¿˜æ¬¾æ–¹å¼ä¸‹ï¼Œæ¯æœˆå¿è¿˜çš„æœ¬é‡‘å›ºå®šï¼Œåˆ©æ¯éšå‰©ä½™æœ¬é‡‘é€’å‡ã€‚

**è®¡ç®—åŽŸç†ï¼š**
æ¯æœˆæœ¬é‡‘ = è´·æ¬¾æ€»é¢ / è¿˜æ¬¾æœˆæ•°
æ¯æœˆåˆ©æ¯ = å‰©ä½™æœ¬é‡‘ Ã— æœˆåˆ©çŽ‡
æ¯æœˆè¿˜æ¬¾ = æ¯æœˆæœ¬é‡‘ + æ¯æœˆåˆ©æ¯

**ä¼˜ç¼ºç‚¹ï¼š**
âœ… æ€»åˆ©æ¯æ”¯å‡ºå°‘
âœ… è¶Šè¿˜è¶Šè½»æ¾
âŒ å‰æœŸè¿˜æ¬¾åŽ‹åŠ›å¤§
âŒ éœ€è¦è¾ƒå¼ºçš„è¿˜æ¬¾èƒ½åŠ›

**é€‚åˆäººç¾¤ï¼š**
- æ”¶å…¥è¾ƒé«˜ä¸”ç¨³å®šçš„äººç¾¤
- è®¡åˆ’æå‰è¿˜æ¬¾çš„è´­æˆ¿è€…
- å¸Œæœ›å‡å°‘æ€»åˆ©æ¯æ”¯å‡ºçš„äººç¾¤`,
    category: 'loan',
    relatedTerms: ['equal_principal_interest', 'prepayment', 'interest'],
    unlockCondition: 'first_calculation'
  },

  annual_return: {
    id: 'annual_return',
    term: 'å¹´åŒ–æ”¶ç›ŠçŽ‡',
    shortDesc: 'æŠ•èµ„ä¸€å¹´çš„é¢„æœŸæ”¶ç›ŠçŽ‡ï¼Œç”¨äºŽè¡¡é‡æŠ•èµ„å›žæŠ¥æ°´å¹³ã€‚',
    longDesc: `å¹´åŒ–æ”¶ç›ŠçŽ‡æ˜¯æŠŠå½“å‰æ”¶ç›ŠçŽ‡ï¼ˆæ—¥æ”¶ç›ŠçŽ‡ã€å‘¨æ”¶ç›ŠçŽ‡ã€æœˆæ”¶ç›ŠçŽ‡ï¼‰æ¢ç®—æˆå¹´æ”¶ç›ŠçŽ‡æ¥è®¡ç®—çš„ç†è®ºæ”¶ç›ŠçŽ‡ã€‚

**è®¡ç®—æ–¹å¼ï¼š**
å¹´åŒ–æ”¶ç›ŠçŽ‡ = (æŠ•èµ„æ”¶ç›Š / æœ¬é‡‘) / (æŠ•èµ„å¤©æ•° / 365) Ã— 100%

**æ³¨æ„äº‹é¡¹ï¼š**
âš ï¸ å¹´åŒ–æ”¶ç›ŠçŽ‡æ˜¯ç†è®ºå€¼ï¼Œä¸ä»£è¡¨å®žé™…æ”¶ç›Š
âš ï¸ è¿‡å¾€æ”¶ç›Šä¸ä»£è¡¨æœªæ¥è¡¨çŽ°
âš ï¸ éœ€è¦è€ƒè™‘é£Žé™©å› ç´ 

**å®žé™…åº”ç”¨ï¼š**
åœ¨ä¹°æˆ¿vsæŠ•èµ„å¯¹æ¯”ä¸­ï¼Œæˆ‘ä»¬å‡è®¾ç§Ÿæˆ¿çœä¸‹çš„é’±ç”¨äºŽæŠ•èµ„ã€‚å¦‚æžœå¹´åŒ–æ”¶ç›ŠçŽ‡è®¾ä¸º6%ï¼Œæ„å‘³ç€æ‚¨é¢„æœŸæ¯å¹´èƒ½èŽ·å¾—6%çš„æŠ•èµ„å›žæŠ¥ã€‚è¿™ä¸ªæ•°å­—åº”è¯¥æ ¹æ®æ‚¨çš„é£Žé™©æ‰¿å—èƒ½åŠ›å’ŒæŠ•èµ„ç­–ç•¥æ¥è®¾å®šã€‚`,
    category: 'investment',
    relatedTerms: ['compound_interest', 'risk', 'inflation'],
    unlockCondition: 'comparison_complete'
  },

  compound_interest: {
    id: 'compound_interest',
    term: 'å¤åˆ©',
    shortDesc: 'åˆ©æ»šåˆ©ï¼Œæ”¶ç›Šå†æŠ•èµ„äº§ç”Ÿæ–°æ”¶ç›Šï¼Œæ˜¯è´¢å¯Œå¢žé•¿çš„æ ¸å¿ƒåŠ¨åŠ›ã€‚',
    longDesc: `å¤åˆ©æ˜¯æŒ‡åœ¨æ¯ç»è¿‡ä¸€ä¸ªè®¡æ¯æœŸåŽï¼Œéƒ½è¦å°†æ‰€ç”Ÿåˆ©æ¯åŠ å…¥æœ¬é‡‘ï¼Œä»¥è®¡ç®—ä¸‹æœŸçš„åˆ©æ¯ã€‚

**çˆ±å› æ–¯å¦åè¨€ï¼š**
"å¤åˆ©æ˜¯ä¸–ç•Œç¬¬å…«å¤§å¥‡è¿¹ï¼Œç†è§£å®ƒçš„äººèµšå–å®ƒï¼Œä¸ç†è§£å®ƒçš„äººæ”¯ä»˜å®ƒã€‚"

**è®¡ç®—å…¬å¼ï¼š**
ç»ˆå€¼ = æœ¬é‡‘ Ã— (1 + åˆ©çŽ‡)^æœŸæ•°

**å®žä¾‹å¯¹æ¯”ï¼š**
æŠ•èµ„10ä¸‡å…ƒï¼Œå¹´åŒ–æ”¶ç›Š8%ï¼š
- 10å¹´åŽå•åˆ©ï¼š18ä¸‡å…ƒ
- 10å¹´åŽå¤åˆ©ï¼š21.6ä¸‡å…ƒ
- å·®è·ï¼š3.6ä¸‡å…ƒï¼ˆ20%ï¼‰

**å…³é”®å¯ç¤ºï¼š**
- æ—¶é—´æ˜¯å¤åˆ©çš„å¥½æœ‹å‹
- è¶Šæ—©å¼€å§‹æŠ•èµ„ï¼Œå¤åˆ©æ•ˆåº”è¶Šæ˜Žæ˜¾
- å³ä½¿å°é¢æŠ•èµ„ï¼Œé•¿æœŸåšæŒä¹Ÿèƒ½ç§¯ç´¯å¯è§‚è´¢å¯Œ`,
    category: 'investment',
    relatedTerms: ['annual_return', 'time_value'],
    unlockCondition: 'comparison_complete'
  },

  inflation: {
    id: 'inflation',
    term: 'é€šè´§è†¨èƒ€',
    shortDesc: 'ç‰©ä»·æ™®éä¸Šæ¶¨ï¼Œè´§å¸è´­ä¹°åŠ›ä¸‹é™ï¼Œå½±å“é•¿æœŸè´¢åŠ¡è§„åˆ’ã€‚',
    longDesc: `é€šè´§è†¨èƒ€æ˜¯æŒ‡è´§å¸ä¾›åº”é‡è¶…è¿‡å®žé™…éœ€æ±‚ï¼Œå¯¼è‡´è´§å¸è´¬å€¼ã€ç‰©ä»·ä¸Šæ¶¨çš„ç»æµŽçŽ°è±¡ã€‚

**å¯¹è´­æˆ¿å†³ç­–çš„å½±å“ï¼š**
1. **æˆ¿è´·æ˜¯"å¥½å€ºåŠ¡"**ï¼šå›ºå®šåˆ©çŽ‡è´·æ¬¾åœ¨é€šèƒ€çŽ¯å¢ƒä¸‹ï¼Œå®žé™…è¿˜æ¬¾è´Ÿæ‹…ä¼šé™ä½Ž
2. **çŽ°é‡‘è´¬å€¼**ï¼šæŒæœ‰çŽ°é‡‘ä¼šå› é€šèƒ€è€Œè´¬å€¼
3. **èµ„äº§ä¿å€¼**ï¼šæˆ¿äº§ç­‰å®žç‰©èµ„äº§é€šå¸¸èƒ½å¯¹æŠ—é€šèƒ€

**å®žé™…æ¡ˆä¾‹ï¼š**
å‡è®¾å¹´é€šèƒ€çŽ‡3%ï¼š
- ä»Šå¤©çš„100ä¸‡ï¼Œ10å¹´åŽè´­ä¹°åŠ›çº¦ç­‰äºŽ74ä¸‡
- ä»Šå¤©æœˆä¾›1ä¸‡å…ƒï¼Œ10å¹´åŽå®žé™…è´Ÿæ‹…çº¦ç­‰äºŽ7400å…ƒ

**åº”å¯¹ç­–ç•¥ï¼š**
âœ“ é€‚åº¦è´Ÿå€ºè´­ä¹°èµ„äº§
âœ“ æŠ•èµ„èƒ½è·‘èµ¢é€šèƒ€çš„äº§å“
âœ“ é¿å…é•¿æœŸæŒæœ‰å¤§é‡çŽ°é‡‘`,
    category: 'basic',
    relatedTerms: ['real_return', 'purchasing_power'],
    unlockCondition: 'always'
  },

  down_payment: {
    id: 'down_payment',
    term: 'é¦–ä»˜æ¯”ä¾‹',
    shortDesc: 'è´­æˆ¿æ—¶éœ€è¦æ”¯ä»˜çš„é¦–ç¬”æ¬¾é¡¹å æˆ¿ä»·çš„æ¯”ä¾‹ï¼Œå½±å“è´·æ¬¾é¢åº¦å’Œæœˆä¾›ã€‚',
    longDesc: `é¦–ä»˜æ¯”ä¾‹æ˜¯è´­æˆ¿æ—¶å¿…é¡»è‡ªå·±æ”¯ä»˜çš„èµ„é‡‘å æˆ¿å±‹æ€»ä»·çš„ç™¾åˆ†æ¯”ï¼Œå‰©ä½™éƒ¨åˆ†å¯ä»¥é€šè¿‡è´·æ¬¾æ”¯ä»˜ã€‚

**æ”¿ç­–è§„å®šï¼š**
- é¦–å¥—æˆ¿ï¼šé€šå¸¸20-30%
- äºŒå¥—æˆ¿ï¼šé€šå¸¸40-50%
- å…·ä½“æ¯”ä¾‹å› åŸŽå¸‚æ”¿ç­–è€Œå¼‚

**é¦–ä»˜æ¯”ä¾‹çš„å½±å“ï¼š**
1. **æœˆä¾›åŽ‹åŠ›**ï¼šé¦–ä»˜è¶Šé«˜ï¼Œè´·æ¬¾è¶Šå°‘ï¼Œæœˆä¾›è¶Šä½Ž
2. **åˆ©æ¯æ€»é¢**ï¼šé¦–ä»˜è¶Šé«˜ï¼Œæ€»åˆ©æ¯è¶Šå°‘
3. **èµ„é‡‘å ç”¨**ï¼šé¦–ä»˜è¶Šé«˜ï¼Œå ç”¨æµåŠ¨èµ„é‡‘è¶Šå¤š

**ç­–ç•¥å»ºè®®ï¼š**
- é¦–ä»˜ä¸æ˜¯è¶Šé«˜è¶Šå¥½ï¼Œè¦å¹³è¡¡æµåŠ¨æ€§
- ä¿ç•™ä¸€å®šçŽ°é‡‘åº”å¯¹çªå‘æƒ…å†µ
- è€ƒè™‘æŠ•èµ„æœºä¼šæˆæœ¬`,
    category: 'loan',
    relatedTerms: ['ltv', 'monthly_payment'],
    unlockCondition: 'always'
  },

  prepayment: {
    id: 'prepayment',
    term: 'æå‰è¿˜æ¬¾',
    shortDesc: 'åœ¨è´·æ¬¾æœŸé™å†…æå‰å¿è¿˜éƒ¨åˆ†æˆ–å…¨éƒ¨è´·æ¬¾ï¼Œå¯å‡å°‘åˆ©æ¯æ”¯å‡ºã€‚',
    longDesc: `æå‰è¿˜æ¬¾æ˜¯æŒ‡å€Ÿæ¬¾äººåœ¨è´·æ¬¾åˆ°æœŸæ—¥å‰ï¼Œæå‰å¿è¿˜éƒ¨åˆ†æˆ–å…¨éƒ¨è´·æ¬¾æœ¬é‡‘ã€‚

**ä¸¤ç§æ–¹å¼ï¼š**
1. **ç¼©çŸ­å¹´é™**ï¼šä¿æŒæœˆä¾›ä¸å˜ï¼Œå‡å°‘è¿˜æ¬¾å¹´é™
2. **å‡å°‘æœˆä¾›**ï¼šä¿æŒå¹´é™ä¸å˜ï¼Œé™ä½Žæ¯æœˆè¿˜æ¬¾é¢

**æ˜¯å¦åº”è¯¥æå‰è¿˜æ¬¾ï¼Ÿ**
éœ€è¦å¯¹æ¯”ï¼š
- è´·æ¬¾åˆ©çŽ‡ vs æŠ•èµ„æ”¶ç›ŠçŽ‡
- å¦‚æžœæŠ•èµ„æ”¶ç›ŠçŽ‡ > è´·æ¬¾åˆ©çŽ‡ï¼Œä¸å»ºè®®æå‰è¿˜
- å¦‚æžœè´·æ¬¾åˆ©çŽ‡ > æŠ•èµ„æ”¶ç›ŠçŽ‡ï¼Œå»ºè®®æå‰è¿˜

**æ³¨æ„äº‹é¡¹ï¼š**
âš ï¸ éƒ¨åˆ†é“¶è¡Œæœ‰æå‰è¿˜æ¬¾è¿çº¦é‡‘
âš ï¸ éœ€è¦ä¿ç•™åº”æ€¥èµ„é‡‘
âš ï¸ è€ƒè™‘èµ„é‡‘çš„æµåŠ¨æ€§éœ€æ±‚

**æœ€ä½³æ—¶æœºï¼š**
- ç­‰é¢æœ¬æ¯ï¼šå‰1/3æœŸé™å†…æå‰è¿˜æ¬¾æ•ˆæžœæœ€å¥½
- ç­‰é¢æœ¬é‡‘ï¼šè¶Šæ—©è¿˜è¶Šåˆ’ç®—`,
    category: 'loan',
    relatedTerms: ['equal_principal_interest', 'interest', 'opportunity_cost'],
    unlockCondition: 'first_calculation'
  },

  opportunity_cost: {
    id: 'opportunity_cost',
    term: 'æœºä¼šæˆæœ¬',
    shortDesc: 'é€‰æ‹©ä¸€é¡¹æŠ•èµ„æ—¶æ”¾å¼ƒçš„å…¶ä»–æŠ•èµ„æœºä¼šçš„æ½œåœ¨æ”¶ç›Šã€‚',
    longDesc: `æœºä¼šæˆæœ¬æ˜¯æŒ‡ä¸ºäº†å¾—åˆ°æŸç§ä¸œè¥¿è€Œå¿…é¡»æ”¾å¼ƒçš„ä¸œè¥¿çš„ä»·å€¼ã€‚

**åœ¨ä¹°æˆ¿å†³ç­–ä¸­çš„åº”ç”¨ï¼š**
- ä¹°æˆ¿çš„æœºä¼šæˆæœ¬ = é¦–ä»˜å’Œæœˆä¾›èµ„é‡‘ç”¨äºŽæŠ•èµ„çš„æ½œåœ¨æ”¶ç›Š
- ç§Ÿæˆ¿çš„æœºä¼šæˆæœ¬ = é”™è¿‡æˆ¿ä»·ä¸Šæ¶¨å’Œèµ„äº§ç§¯ç´¯çš„æœºä¼š

**ç»å…¸æ¡ˆä¾‹ï¼š**
2015å¹´ï¼Œæ‚¨æœ‰100ä¸‡ï¼š
- é€‰æ‹©Aï¼šä»˜é¦–ä»˜ä¹°æˆ¿ï¼ˆæˆ¿ä»·ç¿»å€ï¼‰â†’ çŽ°åœ¨èµ„äº§300ä¸‡+
- é€‰æ‹©Bï¼šæŠ•èµ„è‚¡å¸‚ï¼ˆæ”¶ç›Š50%ï¼‰â†’ çŽ°åœ¨èµ„äº§150ä¸‡
- é€‰æ‹©Açš„æœºä¼šæˆæœ¬ = æ”¾å¼ƒçš„è‚¡å¸‚æ”¶ç›Š50ä¸‡
- ä½†é€‰æ‹©Bçš„æœºä¼šæˆæœ¬ = æ”¾å¼ƒçš„æˆ¿äº§å¢žå€¼150ä¸‡+

**å†³ç­–å»ºè®®ï¼š**
- æ²¡æœ‰å®Œç¾Žçš„é€‰æ‹©ï¼Œåªæœ‰ç›¸å¯¹åˆé€‚çš„é€‰æ‹©
- è¦åŸºäºŽè‡ªå·±çš„é£Žé™©æ‰¿å—èƒ½åŠ›
- è€ƒè™‘å¤šå…ƒåŒ–é…ç½®ï¼Œé™ä½Žæœºä¼šæˆæœ¬`,
    category: 'basic',
    relatedTerms: ['annual_return', 'risk'],
    unlockCondition: 'comparison_complete'
  },

  stress_test: {
    id: 'stress_test',
    term: 'åŽ‹åŠ›æµ‹è¯•',
    shortDesc: 'æ¨¡æ‹Ÿæžç«¯å¸‚åœºæƒ…å†µä¸‹çš„è´¢åŠ¡çŠ¶å†µï¼Œè¯„ä¼°é£Žé™©æ‰¿å—èƒ½åŠ›ã€‚',
    longDesc: `åŽ‹åŠ›æµ‹è¯•æ˜¯æŒ‡åœ¨æžç«¯ä¸åˆ©æƒ…å†µä¸‹ï¼Œæµ‹è¯•æŠ•èµ„ç»„åˆæˆ–è´¢åŠ¡è®¡åˆ’çš„æŠ—é£Žé™©èƒ½åŠ›ã€‚

**å¸¸è§åŽ‹åŠ›æƒ…æ™¯ï¼š**
1. **åˆ©çŽ‡ä¸Šå‡**ï¼šæˆ¿è´·åˆ©çŽ‡ä¸Šæ¶¨1-2%
2. **æ”¶å…¥ä¸‹é™**ï¼šå¤±ä¸šæˆ–æ”¶å…¥å‡å°‘30-50%
3. **æˆ¿ä»·ä¸‹è·Œ**ï¼šæˆ¿äº§ä»·å€¼ä¸‹é™20-30%
4. **æŠ•èµ„äºæŸ**ï¼šæŠ•èµ„ç»„åˆäºæŸ30-50%

**ä¸ºä»€ä¹ˆè¦åšåŽ‹åŠ›æµ‹è¯•ï¼Ÿ**
- è¯„ä¼°æœ€åæƒ…å†µä¸‹çš„è´¢åŠ¡å®‰å…¨æ€§
- æå‰åˆ¶å®šåº”å¯¹é¢„æ¡ˆ
- é¿å…è¿‡åº¦æ æ†

**åº”å¯¹ç­–ç•¥ï¼š**
âœ“ ä¿æŒ6-12ä¸ªæœˆçš„åº”æ€¥å‚¨å¤‡é‡‘
âœ“ æŽ§åˆ¶è´Ÿå€ºçŽ‡åœ¨å¯æ‰¿å—èŒƒå›´å†…
âœ“ å¤šå…ƒåŒ–æ”¶å…¥æ¥æº
âœ“ è´­ä¹°å¿…è¦çš„ä¿é™©`,
    category: 'risk',
    relatedTerms: ['opportunity_cost', 'down_payment'],
    unlockCondition: 'stress_test'
  },

  ltv: {
    id: 'ltv',
    term: 'LTV (è´·æ¬¾ä»·å€¼æ¯”)',
    shortDesc: 'è´·æ¬¾é‡‘é¢å æˆ¿äº§ä»·å€¼çš„æ¯”ä¾‹ï¼Œæ˜¯é“¶è¡Œè¯„ä¼°é£Žé™©çš„é‡è¦æŒ‡æ ‡ã€‚',
    longDesc: `LTV (Loan-to-Value Ratio) æ˜¯è´·æ¬¾é‡‘é¢ä¸Žæˆ¿äº§è¯„ä¼°ä»·å€¼çš„æ¯”çŽ‡ã€‚

**è®¡ç®—å…¬å¼ï¼š**
LTV = (è´·æ¬¾é‡‘é¢ / æˆ¿äº§ä»·å€¼) Ã— 100%

**ç¤ºä¾‹ï¼š**
- æˆ¿ä»·ï¼š100ä¸‡
- é¦–ä»˜ï¼š30ä¸‡
- è´·æ¬¾ï¼š70ä¸‡
- LTV = 70%

**LTVçš„å½±å“ï¼š**
1. **è´·æ¬¾å®¡æ‰¹**ï¼šLTVè¶Šä½Žï¼Œå®¡æ‰¹è¶Šå®¹æ˜“
2. **åˆ©çŽ‡ä¼˜æƒ **ï¼šä½ŽLTVé€šå¸¸èƒ½èŽ·å¾—æ›´ä¼˜æƒ åˆ©çŽ‡
3. **é£Žé™©æŽ§åˆ¶**ï¼šé“¶è¡Œé€šå¸¸è¦æ±‚LTVä¸è¶…è¿‡70-80%

**ä¼˜åŒ–å»ºè®®ï¼š**
- å¢žåŠ é¦–ä»˜é™ä½ŽLTV
- é€‰æ‹©è¯„ä¼°ä»·å€¼é«˜çš„æˆ¿äº§
- è€ƒè™‘ç»„åˆè´·æ¬¾æ–¹å¼`,
    category: 'loan',
    relatedTerms: ['down_payment', 'interest_rate'],
    unlockCondition: 'first_calculation'
  },

  deed_tax: {
    id: 'deed_tax',
    term: 'å¥‘ç¨Ž',
    shortDesc: 'è´­ä¹°æˆ¿äº§æ—¶éœ€è¦ç¼´çº³çš„ç¨Žè´¹ï¼Œæ ¹æ®æˆ¿å±‹é¢ç§¯å’Œæ˜¯å¦é¦–å¥—æœ‰ä¸åŒç¨ŽçŽ‡ã€‚',
    longDesc: `å¥‘ç¨Žæ˜¯åœ¨åœŸåœ°ã€æˆ¿å±‹æƒå±žè½¬ç§»æ—¶ï¼Œå‘æ‰¿å—äººå¾æ”¶çš„ä¸€ç§ç¨Žã€‚

**ç¨ŽçŽ‡æ ‡å‡†ï¼š**
- é¦–å¥—æˆ¿90ãŽ¡ä»¥ä¸‹ï¼š1%
- é¦–å¥—æˆ¿90-140ãŽ¡ï¼š1.5%
- é¦–å¥—æˆ¿140ãŽ¡ä»¥ä¸Šï¼š3%
- äºŒå¥—æˆ¿ï¼š3%

**è®¡ç®—ç¤ºä¾‹ï¼š**
è´­ä¹°é¦–å¥—120ãŽ¡ä½æˆ¿ï¼Œæ€»ä»·200ä¸‡ï¼š
å¥‘ç¨Ž = 200ä¸‡ Ã— 1.5% = 3ä¸‡å…ƒ

**æ³¨æ„äº‹é¡¹ï¼š**
âš ï¸ å„åœ°æ”¿ç­–å¯èƒ½æœ‰å·®å¼‚
âš ï¸ éœ€åœ¨è§„å®šæ—¶é—´å†…ç¼´çº³
âš ï¸ ç¼´çº³åŽæ‰èƒ½åŠžç†äº§æƒè¯

**èŠ‚ç¨ŽæŠ€å·§ï¼š**
- é¦–å¥—æˆ¿ä¼˜å…ˆé€‰æ‹©90-140ãŽ¡
- äº†è§£å½“åœ°ä¼˜æƒ æ”¿ç­–
- åˆç†è§„åˆ’è´­æˆ¿æ—¶é—´`,
    category: 'tax',
    relatedTerms: ['down_payment'],
    unlockCondition: 'first_calculation'
  },

  fixed_rate: {
    id: 'fixed_rate',
    term: 'å›ºå®šåˆ©çŽ‡',
    shortDesc: 'è´·æ¬¾æœŸé—´åˆ©çŽ‡ä¿æŒä¸å˜ï¼Œæœˆä¾›å›ºå®šï¼Œä¾¿äºŽé•¿æœŸè§„åˆ’ã€‚',
    longDesc: `å›ºå®šåˆ©çŽ‡æ˜¯æŒ‡åœ¨æ•´ä¸ªè´·æ¬¾æœŸé™å†…ï¼Œåˆ©çŽ‡ä¿æŒä¸å˜çš„è´·æ¬¾æ–¹å¼ã€‚

**ä¼˜ç‚¹ï¼š**
âœ… æœˆä¾›å›ºå®šï¼Œä¾¿äºŽé¢„ç®—
âœ… è§„é¿åˆ©çŽ‡ä¸Šæ¶¨é£Žé™©
âœ… å¿ƒç†åŽ‹åŠ›å°

**ç¼ºç‚¹ï¼š**
âŒ åˆå§‹åˆ©çŽ‡é€šå¸¸è¾ƒé«˜
âŒ æ— æ³•äº«å—é™æ¯çº¢åˆ©
âŒ æå‰è¿˜æ¬¾å¯èƒ½æœ‰è¿çº¦é‡‘

**é€‚åˆäººç¾¤ï¼š**
- é¢„æœŸæœªæ¥åˆ©çŽ‡ä¸Šæ¶¨
- å¸Œæœ›æœˆä¾›ç¨³å®šçš„ä¿å®ˆåž‹è´­æˆ¿è€…
- æ”¶å…¥å›ºå®šçš„å·¥è–ªæ—

**vs æµ®åŠ¨åˆ©çŽ‡ï¼š**
å›ºå®šåˆ©çŽ‡é€‚åˆåˆ©çŽ‡ä¸Šè¡Œå‘¨æœŸï¼Œæµ®åŠ¨åˆ©çŽ‡é€‚åˆåˆ©çŽ‡ä¸‹è¡Œå‘¨æœŸã€‚`,
    category: 'loan',
    relatedTerms: ['lpr', 'floating_rate'],
    unlockCondition: 'first_calculation'
  },

  floating_rate: {
    id: 'floating_rate',
    term: 'æµ®åŠ¨åˆ©çŽ‡',
    shortDesc: 'åˆ©çŽ‡éšå¸‚åœºå˜åŒ–è€Œè°ƒæ•´ï¼Œé€šå¸¸ä¸ŽLPRæŒ‚é’©ã€‚',
    longDesc: `æµ®åŠ¨åˆ©çŽ‡æ˜¯æŒ‡è´·æ¬¾åˆ©çŽ‡ä¼šéšç€å¸‚åœºåŸºå‡†åˆ©çŽ‡ï¼ˆå¦‚LPRï¼‰çš„å˜åŒ–è€Œè°ƒæ•´ã€‚

**è°ƒæ•´æœºåˆ¶ï¼š**
- é€šå¸¸æ¯å¹´è°ƒæ•´ä¸€æ¬¡
- è°ƒæ•´æ—¥æœŸå¯é€‰æ‹©ï¼ˆå¦‚æ¯å¹´1æœˆ1æ—¥ï¼‰
- åˆ©çŽ‡ = LPR + å›ºå®šåŠ ç‚¹

**ä¼˜ç‚¹ï¼š**
âœ… åˆå§‹åˆ©çŽ‡è¾ƒä½Ž
âœ… å¯äº«å—é™æ¯çº¢åˆ©
âœ… çµæ´»æ€§é«˜

**ç¼ºç‚¹ï¼š**
âŒ æœˆä¾›ä¸ç¡®å®š
âŒ åˆ©çŽ‡ä¸Šæ¶¨é£Žé™©
âŒ éœ€è¦å…³æ³¨å¸‚åœºåŠ¨æ€

**é£Žé™©æŽ§åˆ¶ï¼š**
- è®¾å®šåˆ©çŽ‡ä¸Šé™é¢„è­¦
- ä¿ç•™åº”æ€¥èµ„é‡‘
- è€ƒè™‘æå‰è¿˜æ¬¾`,
    category: 'loan',
    relatedTerms: ['lpr', 'fixed_rate'],
    unlockCondition: 'first_calculation'
  },

  emergency_fund: {
    id: 'emergency_fund',
    term: 'åº”æ€¥å‚¨å¤‡é‡‘',
    shortDesc: 'ç”¨äºŽåº”å¯¹çªå‘æƒ…å†µçš„æµåŠ¨èµ„é‡‘ï¼Œå»ºè®®ä¿ç•™3-6ä¸ªæœˆç”Ÿæ´»è´¹ã€‚',
    longDesc: `åº”æ€¥å‚¨å¤‡é‡‘æ˜¯é¢„ç•™çš„ç”¨äºŽåº”å¯¹çªå‘äº‹ä»¶çš„æµåŠ¨èµ„é‡‘ã€‚

**å»ºè®®é‡‘é¢ï¼š**
- å•èº«ï¼š3-6ä¸ªæœˆç”Ÿæ´»è´¹
- å·²å©šæ— å­©ï¼š6-9ä¸ªæœˆ
- æœ‰å­©å®¶åº­ï¼š9-12ä¸ªæœˆ

**è®¡ç®—ç¤ºä¾‹ï¼š**
æœˆæ”¯å‡º1ä¸‡å…ƒï¼Œå»ºè®®å‚¨å¤‡ï¼š
- æœ€ä½Žï¼š3ä¸‡ï¼ˆ3ä¸ªæœˆï¼‰
- ç†æƒ³ï¼š6-10ä¸‡ï¼ˆ6-10ä¸ªæœˆï¼‰

**å­˜æ”¾æ–¹å¼ï¼š**
1. æ´»æœŸå­˜æ¬¾ï¼ˆéšæ—¶å¯å–ï¼‰
2. è´§å¸åŸºé‡‘ï¼ˆT+1åˆ°è´¦ï¼‰
3. çŸ­æœŸç†è´¢ï¼ˆæµåŠ¨æ€§å¥½ï¼‰

**é‡è¦æ€§ï¼š**
âš ï¸ é¿å…å› çªå‘äº‹ä»¶è¢«è¿«å–æˆ¿
âš ï¸ é˜²æ­¢æ–­ä¾›å½±å“å¾ä¿¡
âš ï¸ ä¿éšœåŸºæœ¬ç”Ÿæ´»è´¨é‡

**ä¸Žä¹°æˆ¿çš„å…³ç³»ï¼š**
ä¹°æˆ¿åŽä»éœ€ä¿ç•™è¶³å¤Ÿåº”æ€¥é‡‘ï¼Œä¸è¦æŠŠæ‰€æœ‰ç§¯è“„éƒ½ç”¨äºŽé¦–ä»˜ã€‚`,
    category: 'risk',
    relatedTerms: ['stress_test', 'down_payment'],
    unlockCondition: 'stress_test'
  },

  real_return: {
    id: 'real_return',
    term: 'å®žé™…æ”¶ç›ŠçŽ‡',
    shortDesc: 'æ‰£é™¤é€šè´§è†¨èƒ€åŽçš„çœŸå®žæ”¶ç›ŠçŽ‡ï¼Œåæ˜ è´­ä¹°åŠ›çš„å®žé™…å¢žé•¿ã€‚',
    longDesc: `å®žé™…æ”¶ç›ŠçŽ‡ = åä¹‰æ”¶ç›ŠçŽ‡ - é€šè´§è†¨èƒ€çŽ‡

**ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ**
åä¹‰æ”¶ç›Šçœ‹èµ·æ¥ä¸é”™ï¼Œä½†æ‰£é™¤é€šèƒ€åŽå¯èƒ½åœ¨è´¬å€¼ã€‚

**è®¡ç®—ç¤ºä¾‹ï¼š**
- æŠ•èµ„æ”¶ç›Šï¼š5%
- é€šè´§è†¨èƒ€ï¼š3%
- å®žé™…æ”¶ç›Šï¼š2%

è¿™æ„å‘³ç€ä½ çš„è´­ä¹°åŠ›åªå¢žé•¿äº†2%ã€‚

**æŠ•èµ„å»ºè®®ï¼š**
âœ“ å…³æ³¨å®žé™…æ”¶ç›Šï¼Œä¸è¢«åä¹‰æ”¶ç›Šè¿·æƒ‘
âœ“ é€‰æ‹©èƒ½è·‘èµ¢é€šèƒ€çš„æŠ•èµ„
âœ“ é•¿æœŸæŠ•èµ„æ›´èƒ½æŠµå¾¡é€šèƒ€

**æˆ¿äº§æŠ•èµ„ï¼š**
æˆ¿äº§é€šå¸¸è¢«è§†ä¸ºæŠ—é€šèƒ€èµ„äº§ï¼Œå› ä¸ºï¼š
- æˆ¿ä»·å¾€å¾€éšé€šèƒ€ä¸Šæ¶¨
- ç§Ÿé‡‘æ”¶å…¥å¯è°ƒæ•´
- å®žç‰©èµ„äº§ä¿å€¼`,
    category: 'investment',
    relatedTerms: ['inflation', 'annual_return'],
    unlockCondition: 'comparison_complete'
  },

  purchasing_power: {
    id: 'purchasing_power',
    term: 'è´­ä¹°åŠ›',
    shortDesc: 'è´§å¸èƒ½å¤Ÿè´­ä¹°å•†å“å’ŒæœåŠ¡çš„èƒ½åŠ›ï¼Œä¼šéšé€šèƒ€è€Œä¸‹é™ã€‚',
    longDesc: `è´­ä¹°åŠ›æ˜¯æŒ‡ä¸€å®šæ•°é‡çš„è´§å¸èƒ½å¤Ÿè´­ä¹°çš„å•†å“å’ŒæœåŠ¡çš„æ•°é‡ã€‚

**é€šèƒ€å¯¹è´­ä¹°åŠ›çš„å½±å“ï¼š**
å‡è®¾å¹´é€šèƒ€çŽ‡3%ï¼š
- ä»Šå¤©çš„100ä¸‡
- 10å¹´åŽç›¸å½“äºŽ74ä¸‡
- 20å¹´åŽç›¸å½“äºŽ55ä¸‡
- 30å¹´åŽç›¸å½“äºŽ41ä¸‡

**ä¿æŠ¤è´­ä¹°åŠ›çš„æ–¹æ³•ï¼š**
1. **æŠ•èµ„å¢žå€¼èµ„äº§**
   - è‚¡ç¥¨ã€åŸºé‡‘
   - æˆ¿äº§
   - é»„é‡‘

2. **é¿å…é•¿æœŸæŒæœ‰çŽ°é‡‘**
   - çŽ°é‡‘ä¼šè´¬å€¼
   - è‡³å°‘è¦è·‘èµ¢é€šèƒ€

3. **åˆç†è´Ÿå€º**
   - å›ºå®šåˆ©çŽ‡è´·æ¬¾åœ¨é€šèƒ€çŽ¯å¢ƒä¸‹å®žé™…è´Ÿæ‹…é™ä½Ž
   - ç”¨æœªæ¥è´¬å€¼çš„é’±è¿˜ä»Šå¤©çš„å€º

**ä¹°æˆ¿å†³ç­–ï¼š**
- æˆ¿è´·æ˜¯"å¥½å€ºåŠ¡"
- ç”¨ä»Šå¤©çš„é’±ä¹°æˆ¿ï¼Œç”¨æœªæ¥è´¬å€¼çš„é’±è¿˜è´·
- æˆ¿äº§æœ¬èº«å¯èƒ½å¢žå€¼`,
    category: 'basic',
    relatedTerms: ['inflation', 'real_return'],
    unlockCondition: 'always'
  },

  time_value: {
    id: 'time_value',
    term: 'è´§å¸æ—¶é—´ä»·å€¼',
    shortDesc: 'ä»Šå¤©çš„1å…ƒé’±æ¯”æœªæ¥çš„1å…ƒé’±æ›´æœ‰ä»·å€¼ã€‚',
    longDesc: `è´§å¸æ—¶é—´ä»·å€¼æ˜¯æŒ‡è´§å¸éšæ—¶é—´æŽ¨ç§»è€Œäº§ç”Ÿçš„å¢žå€¼ã€‚

**æ ¸å¿ƒæ¦‚å¿µï¼š**
ä»Šå¤©çš„1ä¸‡å…ƒ > 1å¹´åŽçš„1ä¸‡å…ƒ

**åŽŸå› ï¼š**
1. å¯ä»¥æŠ•èµ„èŽ·å¾—æ”¶ç›Š
2. é€šè´§è†¨èƒ€å¯¼è‡´è´¬å€¼
3. æœºä¼šæˆæœ¬

**å®žé™…åº”ç”¨ï¼š**

**æå‰è¿˜è´·å†³ç­–ï¼š**
- å¦‚æžœæŠ•èµ„æ”¶ç›Š > è´·æ¬¾åˆ©çŽ‡ï¼šä¸å»ºè®®æå‰è¿˜
- å¦‚æžœè´·æ¬¾åˆ©çŽ‡ > æŠ•èµ„æ”¶ç›Šï¼šå»ºè®®æå‰è¿˜

**ç¤ºä¾‹ï¼š**
- æˆ¿è´·åˆ©çŽ‡ï¼š4%
- æŠ•èµ„æ”¶ç›Šï¼š6%
- ç»“è®ºï¼šä¿ç•™èµ„é‡‘æŠ•èµ„ï¼Œä¸æå‰è¿˜è´·

**çŽ°å€¼ä¸Žç»ˆå€¼ï¼š**
- çŽ°å€¼ï¼šæœªæ¥èµ„é‡‘æŠ˜ç®—åˆ°çŽ°åœ¨çš„ä»·å€¼
- ç»ˆå€¼ï¼šçŽ°åœ¨èµ„é‡‘åœ¨æœªæ¥çš„ä»·å€¼

**ä¹°æˆ¿å¯ç¤ºï¼š**
- æ—©ä¹°æˆ¿å¯èƒ½æ›´åˆ’ç®—ï¼ˆæˆ¿ä»·ä¸Šæ¶¨ + è´§å¸è´¬å€¼ï¼‰
- åˆç†åˆ©ç”¨æ æ†
- æ—¶é—´æ˜¯è´¢å¯Œå¢žé•¿çš„æœ‹å‹`,
    category: 'basic',
    relatedTerms: ['compound_interest', 'opportunity_cost'],
    unlockCondition: 'comparison_complete'
  }
};

export const knowledgeCategories = {
  loan: { name: 'è´·æ¬¾çŸ¥è¯†', icon: 'ðŸ¦', color: '#6366f1' },
  investment: { name: 'æŠ•èµ„ç†è´¢', icon: 'ðŸ“ˆ', color: '#10b981' },
  tax: { name: 'ç¨ŽåŠ¡æ”¿ç­–', icon: 'ðŸ“‹', color: '#f59e0b' },
  risk: { name: 'é£Žé™©ç®¡ç†', icon: 'ðŸ›¡ï¸', color: '#ef4444' },
  basic: { name: 'åŸºç¡€æ¦‚å¿µ', icon: 'ðŸ“š', color: '#8b5cf6' }
};

export const getTermsByCategory = (category: string): KnowledgeTerm[] => {
  return Object.values(knowledgeBase).filter(term => term.category === category);
};

export const getUnlockedTerms = (userProgress: string[]): KnowledgeTerm[] => {
  return Object.values(knowledgeBase).filter(term => 
    term.unlockCondition === 'always' || userProgress.includes(term.unlockCondition)
  );
};

export const getTerm = (id: string): KnowledgeTerm | undefined => {
  return knowledgeBase[id];
};

export const getNextLockedTerm = (currentTermId: string, userProgress: string[]): KnowledgeTerm | null => {
  const allTerms = Object.values(knowledgeBase);
  const currentIndex = allTerms.findIndex(t => t.id === currentTermId);
  
  // Find next locked term in the same category or any category
  for (let i = currentIndex + 1; i < allTerms.length; i++) {
    const term = allTerms[i];
    if (!userProgress.includes(term.unlockCondition) && term.unlockCondition !== 'always') {
      return term;
    }
  }
  
  return null;
};
